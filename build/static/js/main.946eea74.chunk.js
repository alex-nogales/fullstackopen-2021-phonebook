(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),a=t(6),o=t(3),i=t(1),u=t(4),s=t.n(u),d="/api/persons",j=function(){return s.a.get(d).then((function(e){return e.data}))},b=function(e){return s.a.post(d,e).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return s.a.delete("".concat(d,"/").concat(e))},l=t(0),h=function(e){var n=e.searchName,t=e.setSearchName;return Object(l.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})},O=function(e){var n=e.addPerson,t=e.newName,c=e.setNewName,r=e.newNumber,a=e.setNewNumber;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:function(e){return c(e.target.value)}})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:r,onChange:function(e){return a(e.target.value)}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"Add new"})})]})},v=function(e){var n=e.id,t=e.name;return Object(l.jsx)("button",{onClick:function(){return function(e,n,t){window.confirm("do you really want to remove ".concat(n,"?"))&&m(e).catch((function(e){t("information of ".concat(n," has already been removed from the server"),"error"),setTimeout((function(){return t(null)}),5e3)}))}(n,t)},children:"del"})},p=function(e){var n=e.persons,t=e.searchName,c=e.setNotification;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(l.jsx)("div",{children:Object(l.jsxs)("li",{children:[e.name," ",e.number,Object(l.jsx)(v,{name:e.name,id:e.id,setNotification:c})]})},e.name)}))},N=(t(39),function(e){var n=e.notification;return null===n?null:Object(l.jsx)("div",{className:n.type,children:n.message})}),w=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(""),u=Object(o.a)(r,2),s=u[0],d=u[1],m=Object(i.useState)(""),v=Object(o.a)(m,2),w=v[0],x=v[1],g=Object(i.useState)(""),y=Object(o.a)(g,2),S=y[0],k=y[1],C=Object(i.useState)(null),A=Object(o.a)(C,2),P=A[0],E=A[1];Object(i.useEffect)((function(){j().then((function(e){c(e)}))}));var J=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";E({message:e,type:n}),setTimeout((function(){return E(null)}),5e3)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(N,{notification:P}),Object(l.jsx)(h,{searchName:S,setSearchName:k}),Object(l.jsx)("h2",{children:"Add a new contact"}),Object(l.jsx)(O,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===s}));if(n){if(window.confirm("".concat(s," is already added to phonebook, want update it with new number?"))){var r=t.find((function(e){return e.id===n.id})),o=Object(a.a)(Object(a.a)({},r),{},{number:w});f(n.id,o).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),J("Modified ".concat(s))}))}}else b({name:s,number:w}).then((function(e){c(t.concat(e)),d(""),x(""),J("Added ".concat(s))}))},newName:s,setNewName:d,newNumber:w,setNewNumber:x,setNotification:E}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(p,{persons:t,searchName:S})]})};r.a.render(Object(l.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.946eea74.chunk.js.map